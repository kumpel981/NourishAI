[file name]: INDEX_ENHANCED_PRO.html
[file content begin]
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NourishAI Pro | Intelligent Campus Nutrition</title>
    <meta name="description" content="AI-powered nutrition platform for Kenyan university students with voice assistant, meal planning, loyalty rewards, and real-time market intelligence.">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- ApexCharts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.css">
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f8fafc;
            --gray: #64748b;
            --premium-gold: #fbbf24;
            --loyalty-purple: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Enhanced Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.3),
                           0 0 40px rgba(16, 185, 129, 0.1);
            }
            50% { 
                box-shadow: 0 0 40px rgba(99, 102, 241, 0.6),
                           0 0 60px rgba(16, 185, 129, 0.2);
            }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Professional Glass Effect */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .glass-heavy {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(30px) saturate(200%);
            -webkit-backdrop-filter: blur(30px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Premium Card */
        .premium-card {
            background: linear-gradient(135deg, 
                rgba(30, 41, 59, 0.9) 0%,
                rgba(15, 23, 42, 0.9) 100%);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 24px;
            padding: 32px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .premium-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--primary), 
                transparent);
        }

        .premium-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.05),
                transparent);
            transition: left 0.7s;
        }

        .premium-card:hover::after {
            left: 100%;
        }

        .premium-card:hover {
            transform: translateY(-8px) scale(1.01);
            border-color: rgba(99, 102, 241, 0.4);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.3),
                0 0 100px rgba(99, 102, 241, 0.1);
        }

        /* Loyalty Program Styles */
        .loyalty-card {
            background: linear-gradient(135deg,
                rgba(139, 92, 246, 0.1),
                rgba(99, 102, 241, 0.1));
            border: 2px solid transparent;
            border-radius: 24px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            background-clip: padding-box;
        }

        .loyalty-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: -1;
            margin: -2px;
            border-radius: inherit;
            background: linear-gradient(135deg,
                #8b5cf6,
                #6366f1,
                #10b981);
        }

        .loyalty-tier-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tier-bronze {
            background: linear-gradient(135deg, #92400e, #b45309);
            color: #fef3c7;
        }

        .tier-silver {
            background: linear-gradient(135deg, #374151, #6b7280);
            color: #f9fafb;
        }

        .tier-gold {
            background: linear-gradient(135deg, #b45309, #d97706);
            color: #fef3c7;
            animation: pulse-glow 2s infinite;
        }

        .tier-platinum {
            background: linear-gradient(135deg, #0e7490, #0891b2);
            color: #cffafe;
            animation: pulse-glow 1.5s infinite;
        }

        .tier-diamond {
            background: linear-gradient(135deg, #7e22ce, #a855f7);
            color: #f3e8ff;
            animation: pulse-glow 1s infinite;
        }

        /* Achievement Badges */
        .achievement-badge {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            position: relative;
            transition: all 0.3s;
        }

        .achievement-badge:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .achievement-locked {
            filter: grayscale(100%);
            opacity: 0.5;
        }

        .achievement-progress {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Voice Assistant */
        .voice-assistant {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
        }

        .voice-btn {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn.listening {
            animation: glow 1s infinite;
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        .voice-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
        }

        /* Professional Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg,
                rgba(15, 23, 42, 0.95),
                rgba(30, 41, 59, 0.95));
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 32px;
            padding: 40px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 50px 100px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Enhanced Button */
        .btn-premium {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .btn-premium::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.5s;
        }

        .btn-premium:hover::before {
            left: 100%;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 20px 40px rgba(99, 102, 241, 0.4),
                0 0 60px rgba(99, 102, 241, 0.1);
        }

        /* Nutrition Scanner */
        .scanner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .scanner-frame {
            width: 300px;
            height: 300px;
            border: 3px solid var(--primary);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .scanner-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: var(--primary);
            animation: scan 2s infinite linear;
        }

        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }

        /* Meal Calendar */
        .calendar-day {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .calendar-day:hover {
            background: rgba(99, 102, 241, 0.1);
            transform: scale(1.1);
        }

        .calendar-day.meal-planned::after {
            content: '';
            position: absolute;
            bottom: 4px;
            width: 6px;
            height: 6px;
            background: var(--primary);
            border-radius: 50%;
        }

        .calendar-day.selected {
            background: var(--primary);
            color: white;
            font-weight: bold;
        }

        /* Shopping List */
        .shopping-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.03);
            margin-bottom: 8px;
            transition: all 0.2s;
        }

        .shopping-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        .shopping-item.completed {
            opacity: 0.5;
            text-decoration: line-through;
        }

        /* Cooking Timer */
        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(135deg, var(--dark), #1e293b);
            padding: 20px 40px;
            border-radius: 20px;
            border: 2px solid var(--primary);
            text-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }

        /* Nutrition Goals */
        .goal-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .goal-progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Language Selector */
        .language-selector {
            position: relative;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 10px;
            min-width: 150px;
            display: none;
        }

        .language-selector:hover .language-dropdown {
            display: block;
        }

        /* PWA Install Banner */
        .pwa-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .premium-card {
                padding: 24px;
                border-radius: 20px;
            }
            
            .modal-content {
                padding: 24px;
                border-radius: 24px;
            }
            
            .timer-display {
                font-size: 32px;
                padding: 16px 24px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary), var(--secondary));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--primary-dark), var(--secondary));
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, 
                var(--primary), 
                var(--secondary), 
                var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Premium Gradient Text */
        .gradient-text-premium {
            background: linear-gradient(135deg,
                #fbbf24,
                #f59e0b,
                #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Loyalty Gradient Text */
        .gradient-text-loyalty {
            background: linear-gradient(135deg,
                #8b5cf6,
                #6366f1,
                #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Badge Animations */
        @keyframes badgePop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .badge-pop {
            animation: badgePop 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            z-index: 1000;
            pointer-events: none;
        }

        /* Achievement Unlock Animation */
        @keyframes achievementUnlock {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(0deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .achievement-unlock {
            animation: achievementUnlock 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body>
    <!-- Voice Assistant -->
    <div class="voice-assistant">
        <button class="voice-btn" id="voiceAssistantBtn" title="Voice Assistant">
            <i class="fas fa-microphone"></i>
        </button>
    </div>

    <!-- Navigation -->
    <nav class="glass fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-emerald-500 flex items-center justify-center animate-pulse">
                            <i class="fas fa-brain text-white text-xl"></i>
                        </div>
                        <div class="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-amber-500 to-pink-500 rounded-full animate-pulse"></div>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">
                            <span class="gradient-text">Nourish</span><span class="text-white">AI Pro</span>
                        </h1>
                        <p class="text-sm text-gray-400">Intelligent Campus Nutrition</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden lg:flex items-center space-x-8">
                    <a href="#" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-home"></i> Dashboard
                    </a>
                    <a href="#" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-robot"></i> AI Chef
                    </a>
                    <a href="#" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-chart-line"></i> Market Intel
                    </a>
                    <a href="#" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-heart"></i> Nutrition
                    </a>
                    <a href="#" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-crown text-yellow-400"></i> Loyalty
                    </a>
                    <a href="admin.html" class="nav-btn text-gray-300 hover:text-white transition-colors font-medium flex items-center gap-2">
                        <i class="fas fa-cogs"></i> Admin
                    </a>
                </div>

                <!-- User Menu & Actions -->
                <div class="flex items-center space-x-4">
                    <!-- Language Selector -->
                    <div class="language-selector hidden lg:block">
                        <button class="flex items-center gap-2 text-gray-400 hover:text-white">
                            <i class="fas fa-globe"></i>
                            <span>EN</span>
                        </button>
                        <div class="language-dropdown glass">
                            <button class="w-full text-left px-4 py-2 hover:bg-white/5 rounded-lg" data-lang="en">
                                üá∫üá∏ English
                            </button>
                            <button class="w-full text-left px-4 py-2 hover:bg-white/5 rounded-lg" data-lang="sw">
                                üá∞üá™ Kiswahili
                            </button>
                            <button class="w-full text-left px-4 py-2 hover:bg-white/5 rounded-lg" data-lang="fr">
                                üá´üá∑ Fran√ßais
                            </button>
                        </div>
                    </div>

                    <!-- Loyalty Points -->
                    <div class="hidden md:flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-purple-900/30 to-indigo-900/30">
                        <i class="fas fa-gem text-purple-400"></i>
                        <span class="font-bold text-white">1,247</span>
                        <span class="text-sm text-gray-400">points</span>
                    </div>

                    <!-- Notification Bell -->
                    <button class="relative" id="notificationBell">
                        <i class="fas fa-bell text-gray-400 hover:text-white text-xl transition-colors"></i>
                        <span class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center">3</span>
                    </button>

                    <!-- User Profile -->
                    <div class="relative group">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=KenyanStudentPro&backgroundColor=6366f1" 
                             class="w-10 h-10 rounded-xl border-2 border-indigo-500 cursor-pointer">
                        <div class="absolute right-0 top-12 w-64 glass rounded-2xl p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                            <div class="text-sm space-y-3">
                                <div class="flex items-center gap-3">
                                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=KenyanStudentPro&backgroundColor=6366f1" 
                                         class="w-12 h-12 rounded-xl">
                                    <div>
                                        <p class="font-semibold">John Mwangi</p>
                                        <p class="text-gray-400 text-xs">University of Nairobi</p>
                                        <div class="flex items-center gap-1 mt-1">
                                            <i class="fas fa-crown text-yellow-400 text-xs"></i>
                                            <span class="text-xs">Gold Tier</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-3 border-t border-gray-800 space-y-2">
                                    <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-white/5 transition-colors">
                                        <i class="fas fa-user mr-2"></i> My Profile
                                    </button>
                                    <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-white/5 transition-colors">
                                        <i class="fas fa-trophy mr-2"></i> Achievements
                                    </button>
                                    <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-white/5 transition-colors">
                                        <i class="fas fa-cog mr-2"></i> Settings
                                    </button>
                                    <button class="w-full mt-2 btn-premium text-sm">
                                        <i class="fas fa-rocket mr-2"></i> Upgrade to Pro
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-12 px-4 max-w-7xl mx-auto">
        <!-- Hero Section with Loyalty Status -->
        <div class="premium-card mb-8">
            <div class="flex flex-col lg:flex-row items-center justify-between gap-8">
                <div class="flex-1">
                    <h1 class="text-5xl md:text-7xl font-bold mb-6">
                        <span class="gradient-text">AI-Powered</span>
                        <span class="text-white block mt-2">Campus Nutrition</span>
                    </h1>
                    <p class="text-xl text-gray-400 mb-8 max-w-2xl">
                        Intelligent meal planning, real-time market intelligence, personalized nutrition, and exclusive rewards for Kenyan university students.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        <button class="btn-premium" id="startAI">
                            <i class="fas fa-play"></i> Start AI Assistant
                        </button>
                        <button class="btn-premium bg-gradient-to-r from-purple-600 to-pink-600" id="viewLoyalty">
                            <i class="fas fa-gem"></i> View Rewards
                        </button>
                        <button class="glass border border-gray-700 px-8 py-4 rounded-2xl hover:border-indigo-500 transition-colors flex items-center gap-2">
                            <i class="fas fa-download"></i> Install App
                        </button>
                    </div>
                </div>
                
                <!-- Loyalty Status Card -->
                <div class="loyalty-card w-full lg:w-96">
                    <div class="loyalty-tier-badge tier-gold">Gold Tier</div>
                    <div class="text-center mb-6">
                        <div class="text-5xl font-bold gradient-text-loyalty mb-2">1,247</div>
                        <div class="text-gray-300">Loyalty Points</div>
                        <div class="text-sm text-gray-400">You're 253 points from Platinum</div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Weekly Streak</span>
                            <div class="flex items-center gap-1">
                                <i class="fas fa-fire text-orange-500"></i>
                                <span class="font-bold">7 days</span>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Monthly Savings</span>
                            <span class="font-bold text-green-400">Ksh 4,250</span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Next Reward</span>
                            <span class="font-bold text-purple-400">Free Meal</span>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <div class="flex justify-between text-sm mb-2">
                            <span>Progress to Platinum</span>
                            <span>253/1,500</span>
                        </div>
                        <div class="h-2 bg-gray-800 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500" style="width: 17%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <!-- AI Assistant Panel -->
            <div class="lg:col-span-2 premium-card">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-2xl font-bold flex items-center gap-3">
                            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            NourishAI Pro Assistant
                        </h2>
                        <p class="text-gray-400 mt-2">Your personal nutritionist with voice control</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2 text-emerald-400">
                            <div class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></div>
                            <span class="text-sm font-medium">AI ONLINE</span>
                        </div>
                        <button class="glass border border-gray-700 px-4 py-2 rounded-xl hover:border-indigo-500" id="voiceControlToggle">
                            <i class="fas fa-microphone"></i> Voice
                        </button>
                    </div>
                </div>

                <!-- AI Chat Interface -->
                <div class="space-y-6" id="aiChatContainer">
                    <!-- AI Welcome Message -->
                    <div class="ai-bubble glass">
                        <div class="flex items-start gap-4">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink: 0">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="font-semibold">NourishAI Pro</span>
                                    <span class="text-xs text-gray-500">Just now</span>
                                </div>
                                <p class="text-gray-300 leading-relaxed">
                                    üëã <strong>Habari!</strong> Welcome back, John! I've been analyzing real-time market data across all 47 counties. 
                                    <span class="text-emerald-400">Tomatoes are 40% cheaper</span> at Toi Market this week! 
                                    I also noticed you're close to unlocking the <strong class="gradient-text-loyalty">"Meal Prep Master"</strong> achievement!
                                </p>
                                <div class="mt-4 p-4 rounded-xl bg-gradient-to-r from-indigo-900/30 to-emerald-900/30 border border-indigo-500/20">
                                    <p class="text-sm">
                                        <i class="fas fa-lightbulb text-amber-500 mr-2"></i>
                                        <strong>Pro Tip:</strong> Cook in bulk this weekend and freeze portions. This saves 40% on fuel and earns you 50 loyalty points!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- User Input Area -->
                    <div class="flex gap-4">
                        <div class="flex-1 relative">
                            <input type="text" 
                                   id="aiInput"
                                   placeholder="Ask NourishAI anything or say 'Hey Nourish'... (e.g., 'What's cheap this week?')"
                                   class="premium-input pr-24">
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2 flex gap-3">
                                <button class="text-gray-400 hover:text-white transition-colors" id="voiceInputBtn">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button class="text-gray-400 hover:text-white transition-colors" id="cameraInputBtn">
                                    <i class="fas fa-camera"></i>
                                </button>
                                <button class="text-gray-400 hover:text-white transition-colors" id="attachFileBtn">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                            </div>
                        </div>
                        <button id="sendMessage" class="btn-premium px-6">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>

                    <!-- Quick Actions -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
                        <button class="quick-action premium-card border border-gray-700 p-4 rounded-2xl hover:border-indigo-500 transition-all text-center" data-action="generate" data-voice="generate a meal">
                            <i class="fas fa-utensils text-2xl mb-2 text-indigo-400"></i>
                            <p class="text-sm font-medium">Generate Meal</p>
                            <p class="text-xs text-gray-400">+5 points</p>
                        </button>
                        <button class="quick-action premium-card border border-gray-700 p-4 rounded-2xl hover:border-emerald-500 transition-all text-center" data-action="shopping" data-voice="shopping list">
                            <i class="fas fa-shopping-cart text-2xl mb-2 text-emerald-400"></i>
                            <p class="text-sm font-medium">Smart Shopping</p>
                            <p class="text-xs text-gray-400">Save 30%</p>
                        </button>
                        <button class="quick-action premium-card border border-gray-700 p-4 rounded-2xl hover:border-amber-500 transition-all text-center" data-action="nutrition" data-voice="nutrition scan">
                            <i class="fas fa-chart-bar text-2xl mb-2 text-amber-400"></i>
                            <p class="text-sm font-medium">Nutrition Scan</p>
                            <p class="text-xs text-gray-400">Use camera</p>
                        </button>
                        <button class="quick-action premium-card border border-gray-700 p-4 rounded-2xl hover:border-pink-500 transition-all text-center" data-action="group" data-voice="group cooking">
                            <i class="fas fa-users text-2xl mb-2 text-pink-400"></i>
                            <p class="text-sm font-medium">Group Cooking</p>
                            <p class="text-xs text-gray-400">Save together</p>
                        </button>
                    </div>
                </div>
            </div>

            <!-- User Profile & Recommendations -->
            <div class="space-y-8">
                <!-- Profile & Achievements -->
                <div class="premium-card">
                    <div class="flex items-center gap-4 mb-6">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=UniversityStudent&backgroundColor=10b981" 
                             class="w-16 h-16 rounded-2xl border-2 border-emerald-500">
                        <div>
                            <h3 class="font-bold text-lg">John Mwangi</h3>
                            <p class="text-gray-400 text-sm">University of Nairobi</p>
                            <div class="flex items-center gap-2 mt-1">
                                <i class="fas fa-crown text-yellow-400 text-xs"></i>
                                <span class="text-xs bg-gradient-to-r from-yellow-900/30 to-amber-900/30 px-2 py-1 rounded-full">Gold Tier</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Achievements -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3 flex items-center justify-between">
                            <span>Recent Achievements</span>
                            <span class="text-xs text-gray-400">3/5 unlocked</span>
                        </h4>
                        <div class="flex gap-3">
                            <div class="achievement-badge bg-gradient-to-br from-emerald-500 to-cyan-600" title="Budget Master - Saved Ksh 1,000 this week">
                                <i class="fas fa-piggy-bank"></i>
                                <div class="achievement-progress">100%</div>
                            </div>
                            <div class="achievement-badge bg-gradient-to-br from-amber-500 to-orange-600" title="Healthy Streak - 7 healthy meals">
                                <i class="fas fa-heart"></i>
                                <div class="achievement-progress">70%</div>
                            </div>
                            <div class="achievement-badge achievement-locked bg-gradient-to-br from-purple-500 to-pink-600" title="Meal Prep Master - Locked">
                                <i class="fas fa-box"></i>
                                <div class="achievement-progress">40%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Budget Control -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <label class="font-medium">Daily Budget</label>
                            <span class="text-2xl font-bold gradient-text" id="budgetDisplay">Ksh 250</span>
                        </div>
                        <input type="range" min="50" max="1000" value="250" 
                               class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-r [&::-webkit-slider-thumb]:from-indigo-500 [&::-webkit-slider-thumb]:to-emerald-500"
                               id="budgetSlider">
                        <div class="flex justify-between text-sm text-gray-500 mt-2">
                            <span>Ksh 50</span>
                            <span>Ksh 1000</span>
                        </div>
                    </div>

                    <!-- Campus Selector -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3">Select Campus</label>
                        <div class="relative">
                            <select class="premium-input appearance-none cursor-pointer" id="campusSelect">
                                <!-- Loaded by JavaScript -->
                            </select>
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <button class="btn-premium w-full" id="generateMealPlan">
                        <i class="fas fa-magic"></i> Generate AI Meal Plan
                    </button>
                </div>

                <!-- Personalized Recommendations -->
                <div class="premium-card">
                    <h3 class="text-lg font-bold mb-6 flex items-center gap-3">
                        <i class="fas fa-star text-yellow-400"></i>
                        Personalized For You
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Recommendation 1 -->
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-gradient-to-r from-emerald-900/20 to-transparent hover:from-emerald-900/30 transition-all group">
                            <div class="w-12 h-12 rounded-lg bg-emerald-900/30 flex items-center justify-center">
                                <i class="fas fa-bolt text-emerald-400"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Quick Lunch Idea</p>
                                <p class="text-xs text-gray-400">15 mins ‚Ä¢ Ksh 120</p>
                            </div>
                            <button class="opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1 rounded-lg bg-emerald-900/30 text-emerald-400 text-sm">
                                Try
                            </button>
                        </div>

                        <!-- Recommendation 2 -->
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-gradient-to-r from-purple-900/20 to-transparent hover:from-purple-900/30 transition-all group">
                            <div class="w-12 h-12 rounded-lg bg-purple-900/30 flex items-center justify-center">
                                <i class="fas fa-gem text-purple-400"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Earn 100 Points</p>
                                <p class="text-xs text-gray-400">Cook 3 healthy meals</p>
                            </div>
                            <button class="opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1 rounded-lg bg-purple-900/30 text-purple-400 text-sm">
                                View
                            </button>
                        </div>

                        <!-- Recommendation 3 -->
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-gradient-to-r from-blue-900/20 to-transparent hover:from-blue-900/30 transition-all group">
                            <div class="w-12 h-12 rounded-lg bg-blue-900/30 flex items-center justify-center">
                                <i class="fas fa-chart-line text-blue-400"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Price Alert</p>
                                <p class="text-xs text-gray-400">Tomatoes 40% off</p>
                            </div>
                            <button class="opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1 rounded-lg bg-blue-900/30 text-blue-400 text-sm">
                                Shop
                            </button>
                        </div>
                    </div>

                    <!-- View All Recommendations -->
                    <button class="w-full mt-6 premium-input border border-gray-700 hover:border-indigo-500 transition-colors text-center" id="viewAllRecommendations">
                        View All Recommendations
                    </button>
                </div>
            </div>
        </div>

        <!-- AI Meal Recommendations with Loyalty Rewards -->
        <div class="premium-card mb-12">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-2xl font-bold">ü§ñ AI's Top Recommendations</h2>
                    <p class="text-gray-400">Personalized meals with loyalty rewards</p>
                </div>
                <div class="flex gap-3">
                    <button class="btn-premium bg-gradient-to-r from-purple-600 to-pink-600" id="viewLoyaltyRewards">
                        <i class="fas fa-gift"></i> View Rewards
                    </button>
                    <button class="btn-premium" id="refreshAI">
                        <i class="fas fa-sync-alt"></i> Refresh AI
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Meal Card 1 - Budget Pick -->
                <div class="premium-card border border-emerald-500/20 hover:border-emerald-500/40 transition-colors relative">
                    <div class="loyalty-tier-badge tier-bronze" style="top: 16px; left: 16px; right: auto;">+25 pts</div>
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-emerald-900/30 text-emerald-400 mb-2">
                                BUDGET PICK
                            </span>
                            <h3 class="text-xl font-bold">Smart Rice Bowl</h3>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold gradient-text">Ksh 120</div>
                            <div class="text-sm text-gray-400">48% of budget</div>
                        </div>
                    </div>
                    <p class="text-gray-400 mb-6">AI-optimized rice bowl with seasonal vegetables and protein. One-pot wonder with minimal cleanup.</p>
                    <div class="space-y-3 mb-6">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">‚è±Ô∏è Cook Time</span>
                            <span class="font-medium">20 mins</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üî• Difficulty</span>
                            <span class="font-medium text-emerald-400">Easy</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">ü•ó Nutrition</span>
                            <span class="font-medium">8.5/10</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üéÅ Loyalty</span>
                            <span class="font-medium text-purple-400">+25 points</span>
                        </div>
                    </div>
                    <button class="btn-premium w-full start-cooking">
                        <i class="fas fa-utensils"></i> Start Cooking
                    </button>
                </div>

                <!-- Meal Card 2 - Premium Pick -->
                <div class="premium-card border border-indigo-500/20 hover:border-indigo-500/40 transition-colors relative">
                    <div class="loyalty-tier-badge tier-gold" style="top: 16px; left: 16px; right: auto;">+75 pts</div>
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-indigo-900/30 text-indigo-400 mb-2">
                                PREMIUM PICK
                            </span>
                            <h3 class="text-xl font-bold">Protein Feast</h3>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold gradient-text">Ksh 180</div>
                            <div class="text-sm text-gray-400">72% of budget</div>
                        </div>
                    </div>
                    <p class="text-gray-400 mb-6">Chicken stir-fry with ugali and vegetables. High protein for active students.</p>
                    <div class="space-y-3 mb-6">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">‚è±Ô∏è Cook Time</span>
                            <span class="font-medium">30 mins</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üî• Difficulty</span>
                            <span class="font-medium text-amber-400">Medium</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">ü•ó Nutrition</span>
                            <span class="font-medium">9.0/10</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üéÅ Loyalty</span>
                            <span class="font-medium text-amber-400">+75 points</span>
                        </div>
                    </div>
                    <button class="btn-premium w-full watch-tutorial">
                        <i class="fas fa-video"></i> Watch Tutorial
                    </button>
                </div>

                <!-- Meal Card 3 - Healthy Pick -->
                <div class="premium-card border border-cyan-500/20 hover:border-cyan-500/40 transition-colors relative">
                    <div class="loyalty-tier-badge tier-silver" style="top: 16px; left: 16px; right: auto;">+50 pts</div>
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-cyan-900/30 text-cyan-400 mb-2">
                                HEALTHY PICK
                            </span>
                            <h3 class="text-xl font-bold">Vegan Power Bowl</h3>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold gradient-text">Ksh 140</div>
                            <div class="text-sm text-gray-400">56% of budget</div>
                        </div>
                    </div>
                    <p class="text-gray-400 mb-6">Plant-based delight with avocado, beans, and fresh vegetables. Rich in fiber and vitamins.</p>
                    <div class="space-y-3 mb-6">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">‚è±Ô∏è Cook Time</span>
                            <span class="font-medium">25 mins</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üî• Difficulty</span>
                            <span class="font-medium text-emerald-400">Easy</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">ü•ó Nutrition</span>
                            <span class="font-medium">9.5/10</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">üéÅ Loyalty</span>
                            <span class="font-medium text-cyan-400">+50 points</span>
                        </div>
                    </div>
                    <button class="btn-premium w-full buy-ingredients">
                        <i class="fas fa-shopping-cart"></i> Buy Ingredients
                    </button>
                </div>
            </div>
        </div>

        <!-- Loyalty Program & Achievements Section -->
        <div class="premium-card mb-12">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-2xl font-bold">üèÜ Loyalty Program</h2>
                    <p class="text-gray-400">Earn points, unlock rewards, and level up your tier</p>
                </div>
                <button class="btn-premium bg-gradient-to-r from-purple-600 to-pink-600" id="viewAllRewards">
                    <i class="fas fa-gift"></i> View All Rewards
                </button>
            </div>

            <!-- Tiers & Progress -->
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
                <div class="text-center p-4 rounded-2xl bg-gradient-to-b from-gray-900 to-gray-800">
                    <div class="text-2xl mb-2">ü•â</div>
                    <h4 class="font-bold">Bronze</h4>
                    <p class="text-sm text-gray-400">0-500 pts</p>
                    <div class="mt-2 text-xs text-gray-500">Unlocked</div>
                </div>
                <div class="text-center p-4 rounded-2xl bg-gradient-to-b from-gray-800 to-gray-700">
                    <div class="text-2xl mb-2">ü•à</div>
                    <h4 class="font-bold">Silver</h4>
                    <p class="text-sm text-gray-400">501-1,000 pts</p>
                    <div class="mt-2 text-xs text-emerald-400">Achieved</div>
                </div>
                <div class="text-center p-4 rounded-2xl bg-gradient-to-b from-yellow-900 to-amber-800 border-2 border-amber-500">
                    <div class="text-2xl mb-2">ü•á</div>
                    <h4 class="font-bold text-white">Gold</h4>
                    <p class="text-sm text-amber-200">1,001-1,500 pts</p>
                    <div class="mt-2 text-xs text-amber-300">Current</div>
                </div>
                <div class="text-center p-4 rounded-2xl bg-gradient-to-b from-cyan-900 to-blue-800">
                    <div class="text-2xl mb-2">üíé</div>
                    <h4 class="font-bold">Platinum</h4>
                    <p class="text-sm text-gray-400">1,501-2,500 pts</p>
                    <div class="mt-2 text-xs text-gray-500">253 pts to go</div>
                </div>
                <div class="text-center p-4 rounded-2xl bg-gradient-to-b from-purple-900 to-pink-800">
                    <div class="text-2xl mb-2">üëë</div>
                    <h4 class="font-bold">Diamond</h4>
                    <p class="text-sm text-gray-400">2,501+ pts</p>
                    <div class="mt-2 text-xs text-gray-500">Locked</div>
                </div>
            </div>

            <!-- Ways to Earn Points -->
            <div class="mb-8">
                <h4 class="font-bold mb-4">Ways to Earn Points</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-emerald-900/30 to-emerald-900/10 border border-emerald-500/20">
                        <i class="fas fa-utensils text-2xl text-emerald-400 mb-3"></i>
                        <h5 class="font-bold">Cook Meals</h5>
                        <p class="text-sm text-gray-400">+25 points per meal</p>
                    </div>
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-blue-900/30 to-blue-900/10 border border-blue-500/20">
                        <i class="fas fa-chart-line text-2xl text-blue-400 mb-3"></i>
                        <h5 class="font-bold">Save Money</h5>
                        <p class="text-sm text-gray-400">+1 point per Ksh 10 saved</p>
                    </div>
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-purple-900/30 to-purple-900/10 border border-purple-500/20">
                        <i class="fas fa-fire text-2xl text-purple-400 mb-3"></i>
                        <h5 class="font-bold">Daily Streak</h5>
                        <p class="text-sm text-gray-400">+50 points per 7 days</p>
                    </div>
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-amber-900/30 to-amber-900/10 border border-amber-500/20">
                        <i class="fas fa-trophy text-2xl text-amber-400 mb-3"></i>
                        <h5 class="font-bold">Achievements</h5>
                        <p class="text-sm text-gray-400">+100-500 points each</p>
                    </div>
                </div>
            </div>

            <!-- Available Rewards -->
            <div>
                <h4 class="font-bold mb-4">Available Rewards</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h5 class="font-bold">Free Meal</h5>
                                <p class="text-sm text-gray-400">Any meal up to Ksh 200</p>
                            </div>
                            <span class="px-3 py-1 rounded-full bg-purple-900/30 text-purple-400 text-sm font-bold">
                                500 pts
                            </span>
                        </div>
                        <button class="w-full premium-input border border-gray-700 hover:border-purple-500 transition-colors">
                            Redeem
                        </button>
                    </div>
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h5 class="font-bold">Pro Features</h5>
                                <p class="text-sm text-gray-400">1 month free access</p>
                            </div>
                            <span class="px-3 py-1 rounded-full bg-amber-900/30 text-amber-400 text-sm font-bold">
                                750 pts
                            </span>
                        </div>
                        <button class="w-full premium-input border border-gray-700 hover:border-amber-500 transition-colors">
                            Redeem
                        </button>
                    </div>
                    <div class="p-4 rounded-2xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h5 class="font-bold">Smart Kitchen Kit</h5>
                                <p class="text-sm text-gray-400">Cooking utensils set</p>
                            </div>
                            <span class="px-3 py-1 rounded-full bg-emerald-900/30 text-emerald-400 text-sm font-bold">
                                1,500 pts
                            </span>
                        </div>
                        <button class="w-full premium-input border border-gray-700 hover:border-emerald-500 transition-colors" disabled>
                            Need Gold Tier
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Advanced Features Grid -->
        <div class="premium-card mb-12">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-2xl font-bold">‚ö° Advanced Features</h2>
                    <p class="text-gray-400">Professional tools for smart campus living</p>
                </div>
                <button class="btn-premium" id="upgradeToPro">
                    <i class="fas fa-rocket"></i> Upgrade to Pro
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Meal Planner -->
                <div class="premium-card border border-indigo-500/20 hover:border-indigo-500/40 transition-colors text-center">
                    <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 mx-auto">
                        <i class="fas fa-calendar-alt text-white text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">Meal Planner</h4>
                    <p class="text-sm text-gray-400 mb-4">Weekly meal calendar with auto-shopping list</p>
                    <button class="btn-premium w-full text-sm" onclick="openMealPlanner()">
                        <i class="fas fa-calendar-plus"></i> Plan Week
                    </button>
                </div>

                <!-- Nutrition Scanner -->
                <div class="premium-card border border-emerald-500/20 hover:border-emerald-500/40 transition-colors text-center">
                    <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-500 to-cyan-600 flex items-center justify-center mb-4 mx-auto">
                        <i class="fas fa-camera text-white text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">Nutrition Scanner</h4>
                    <p class="text-sm text-gray-400 mb-4">Scan food labels with your camera</p>
                    <button class="btn-premium w-full text-sm" onclick="openNutritionScanner()">
                        <i class="fas fa-camera"></i> Scan Now
                    </button>
                </div>

                <!-- Group Cooking -->
                <div class="premium-card border border-pink-500/20 hover:border-pink-500/40 transition-colors text-center">
                    <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center mb-4 mx-auto">
                        <i class="fas fa-users text-white text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">Group Cooking</h4>
                    <p class="text-sm text-gray-400 mb-4">Split costs with roommates</p>
                    <button class="btn-premium w-full text-sm" onclick="openGroupCooking()">
                        <i class="fas fa-user-plus"></i> Create Group
                    </button>
                </div>

                <!-- Cooking Timer -->
                <div class="premium-card border border-amber-500/20 hover:border-amber-500/40 transition-colors text-center">
                    <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center mb-4 mx-auto">
                        <i class="fas fa-clock text-white text-2xl"></i>
                    </div>
                    <h4 class="font-bold mb-2">Smart Timer</h4>
                    <p class="text-sm text-gray-400 mb-4">Multi-step cooking timer</p>
                    <button class="btn-premium w-full text-sm" onclick="openCookingTimer()">
                        <i class="fas fa-play"></i> Start Timer
                    </button>
                </div>
            </div>
        </div>

        <!-- Real-time Market Intelligence -->
        <div class="premium-card mb-12">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-2xl font-bold">üìà Real-time Market Intelligence</h2>
                    <p class="text-gray-400">Live prices across all 47 counties</p>
                </div>
                <div class="flex gap-3">
                    <button class="premium-input border border-gray-700" id="refreshMarketData">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn-premium" onclick="openMarketMap()">
                        <i class="fas fa-map"></i> View Map
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Price Alerts -->
                <div class="lg:col-span-2">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="p-4 rounded-2xl bg-gradient-to-r from-emerald-900/30 to-transparent border border-emerald-500/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-bold text-lg">Tomatoes</p>
                                    <p class="text-sm text-gray-400">Toi Market, Nairobi</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-emerald-400">Ksh 20/kg</p>
                                    <p class="text-xs text-emerald-400">‚Üì 40% off</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 rounded-2xl bg-gradient-to-r from-red-900/30 to-transparent border border-red-500/20">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-bold text-lg">Chicken</p>
                                    <p class="text-sm text-gray-400">City Market, Nairobi</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-red-400">Ksh 450/kg</p>
                                    <p class="text-xs text-red-400">‚Üë 15% rise</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Market Trends Chart -->
                    <div class="premium-card border border-gray-700">
                        <h4 class="font-bold mb-4">Weekly Price Trends</h4>
                        <div id="marketTrendsChart" style="height: 200px;"></div>
                    </div>
                </div>

                <!-- Best Buys -->
                <div class="space-y-4">
                    <h4 class="font-bold">Best Buys This Week</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-emerald-900/30 flex items-center justify-center">
                                    <i class="fas fa-carrot text-emerald-400"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Onions</p>
                                    <p class="text-xs text-gray-400">Ksh 50/kg</p>
                                </div>
                            </div>
                            <span class="text-sm text-emerald-400">Save 25%</span>
                        </div>
                        <div class="flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-blue-900/30 flex items-center justify-center">
                                    <i class="fas fa-seedling text-blue-400"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Cabbage</p>
                                    <p class="text-xs text-gray-400">Ksh 30/head</p>
                                </div>
                            </div>
                            <span class="text-sm text-blue-400">Save 20%</span>
                        </div>
                        <div class="flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-amber-900/30 flex items-center justify-center">
                                    <i class="fas fa-egg text-amber-400"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Eggs</p>
                                    <p class="text-xs text-gray-400">Ksh 300/tray</p>
                                </div>
                            </div>
                            <span class="text-sm text-amber-400">Save 10%</span>
                        </div>
                    </div>

                    <!-- Shopping Tip -->
                    <div class="p-4 rounded-2xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30 border border-indigo-500/20 mt-4">
                        <p class="text-sm">
                            <i class="fas fa-lightbulb text-indigo-400 mr-2"></i>
                            <strong>Pro Tip:</strong> Buy in bulk at Toi Market on Tuesday mornings for best prices. Earn 50 loyalty points for bulk purchases!
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity & Achievements -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <!-- Recent Activity -->
            <div class="premium-card">
                <h2 class="text-2xl font-bold mb-6">üìä Recent Activity</h2>
                <div class="space-y-4">
                    <div class="flex items-center gap-4 p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                        <div class="w-10 h-10 rounded-lg bg-emerald-900/30 flex items-center justify-center">
                            <i class="fas fa-utensils text-emerald-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium">Cooked Smart Rice Bowl</p>
                            <p class="text-xs text-gray-400">2 hours ago ‚Ä¢ +25 points</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                        <div class="w-10 h-10 rounded-lg bg-purple-900/30 flex items-center justify-center">
                            <i class="fas fa-gem text-purple-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium">Reached Gold Tier</p>
                            <p class="text-xs text-gray-400">Yesterday ‚Ä¢ +100 points</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                        <div class="w-10 h-10 rounded-lg bg-blue-900/30 flex items-center justify-center">
                            <i class="fas fa-shopping-cart text-blue-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium">Saved Ksh 150 shopping</p>
                            <p class="text-xs text-gray-400">2 days ago ‚Ä¢ +15 points</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 p-3 rounded-xl bg-gradient-to-r from-gray-900/50 to-transparent">
                        <div class="w-10 h-10 rounded-lg bg-amber-900/30 flex items-center justify-center">
                            <i class="fas fa-fire text-amber-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium">7-day streak maintained</p>
                            <p class="text-xs text-gray-400">3 days ago ‚Ä¢ +50 points</p>
                        </div>
                    </div>
                </div>
                <button class="w-full mt-6 premium-input border border-gray-700 hover:border-indigo-500 transition-colors text-center">
                    View All Activity
                </button>
            </div>

            <!-- Achievement Gallery -->
            <div class="premium-card">
                <h2 class="text-2xl font-bold mb-6">üèÜ Achievement Gallery</h2>
                <div class="grid grid-cols-3 gap-4 mb-6">
                    <div class="achievement-badge bg-gradient-to-br from-emerald-500 to-cyan-600" title="Budget Master">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="achievement-badge bg-gradient-to-br from-amber-500 to-orange-600" title="Healthy Streak">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="achievement-badge bg-gradient-to-br from-purple-500 to-pink-600" title="Meal Prep Master">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="achievement-badge achievement-locked bg-gradient-to-br from-blue-500 to-cyan-600" title="Market Expert">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="achievement-badge achievement-locked bg-gradient-to-br from-yellow-500 to-amber-600" title="Cooking Pro">
                        <i class="fas fa-chef-hat"></i>
                    </div>
                    <div class="achievement-badge achievement-locked bg-gradient-to-br from-red-500 to-pink-600" title="Challenge Master">
                        <i class="fas fa-trophy"></i>
                    </div>
                </div>
                <div class="text-center">
                    <p class="text-sm text-gray-400 mb-3">3/12 achievements unlocked</p>
                    <div class="h-2 bg-gray-800 rounded-full overflow-hidden mb-4">
                        <div class="h-full bg-gradient-to-r from-emerald-500 to-cyan-500" style="width: 25%"></div>
                    </div>
                    <button class="btn-premium w-full" onclick="viewAllAchievements()">
                        <i class="fas fa-trophy"></i> View All Achievements
                    </button>
                </div>
            </div>

            <!-- Weekly Goals -->
            <div class="premium-card">
                <h2 class="text-2xl font-bold mb-6">üéØ Weekly Goals</h2>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Budget Goal</span>
                            <span class="text-sm">Ksh 1,250/1,750</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar bg-gradient-to-r from-emerald-500 to-green-500" style="width: 71%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Healthy Meals</span>
                            <span class="text-sm">5/7 meals</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar bg-gradient-to-r from-amber-500 to-orange-500" style="width: 71%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Cooking Streak</span>
                            <span class="text-sm">7 days</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar bg-gradient-to-r from-purple-500 to-pink-500" style="width: 100%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">Loyalty Points</span>
                            <span class="text-sm">250/500 points</span>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar bg-gradient-to-r from-blue-500 to-cyan-500" style="width: 50%"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-6 p-4 rounded-2xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30 border border-indigo-500/20">
                    <p class="text-sm">
                        <i class="fas fa-star text-yellow-400 mr-2"></i>
                        Complete all goals this week to earn <strong class="gradient-text">500 bonus points</strong>!
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-12 pt-8 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col lg:flex-row justify-between items-start gap-8">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-emerald-500 flex items-center justify-center">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">NourishAI Pro</h3>
                            <p class="text-sm text-gray-400">Feeding Kenya's Future Intelligently</p>
                        </div>
                    </div>
                    <p class="text-gray-500 text-sm max-w-md mb-4">
                        AI-powered nutrition platform for Kenyan university students. 
                        Real-time market intelligence, personalized meal plans, intelligent budgeting, 
                        and exclusive loyalty rewards.
                    </p>
                    <div class="flex gap-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-whatsapp text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-tiktok text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold mb-4">Platform</h4>
                        <div class="space-y-2">
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Features</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Pricing</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Download App</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">API Docs</a>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-bold mb-4">Support</h4>
                        <div class="space-y-2">
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Help Center</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Community</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Contact Us</a>
                            <a href="#" class="block text-gray-400 hover:text-white transition-colors text-sm">Privacy Policy</a>
                        </div>
                    </div>
                </div>

                <!-- App Download -->
                <div class="text-center lg:text-right">
                    <h4 class="font-bold mb-4">Get the App</h4>
                    <div class="space-y-3">
                        <button class="flex items-center gap-3 px-6 py-3 rounded-2xl bg-gray-900 hover:bg-gray-800 transition-colors">
                            <i class="fab fa-apple text-2xl"></i>
                            <div class="text-left">
                                <p class="text-xs text-gray-400">Download on the</p>
                                <p class="font-bold">App Store</p>
                            </div>
                        </button>
                        <button class="flex items-center gap-3 px-6 py-3 rounded-2xl bg-gray-900 hover:bg-gray-800 transition-colors">
                            <i class="fab fa-google-play text-2xl"></i>
                            <div class="text-left">
                                <p class="text-xs text-gray-400">Get it on</p>
                                <p class="font-bold">Google Play</p>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-gray-800 text-center text-sm text-gray-500">
                <p>¬© 2024 NourishAI Pro. For Kenyan Students, By Kenyan Students.</p>
                <p class="mt-2">Contact: 0778796999 ‚Ä¢ anyumbasidol@gmail.com ‚Ä¢ Response Time: < 5min</p>
                <p class="mt-1">System Status: <span class="text-green-400">‚óè All Systems Operational</span></p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.min.js"></script>
    
    <!-- Main JavaScript -->
    <script>
        // Enhanced Professional NourishAI Platform
        class NourishAIPro {
            constructor() {
                this.budget = 250;
                this.loyaltyPoints = 1247;
                this.currentTier = 'gold';
                this.currentUniversity = 'University of Nairobi';
                this.currentRegion = 'nairobi';
                this.voiceEnabled = false;
                this.achievements = [];
                this.weeklyGoals = {};
                this.mealHistory = [];
                this.notifications = [];
                this.init();
            }

            init() {
                console.log(`
                ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
                ‚ïë     üöÄ NOURISH AI PRO v6.0              ‚ïë
                ‚ïë     ENTERPRISE EDITION                  ‚ïë
                ‚ïë     Status: 100% OPERATIONAL            ‚ïë
                ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                
                Features loaded:
                ‚úì Voice Assistant Integration
                ‚úì PWA Ready (Installable App)
                ‚úì Loyalty Program with 5 Tiers
                ‚úì Achievement System with 12 Badges
                ‚úì Real-time Market Intelligence
                ‚úì Nutrition Scanner (Camera)
                ‚úì Meal Planner & Calendar
                ‚úì Group Cooking Features
                ‚úì Cooking Timer
                ‚úì Shopping List Generator
                ‚úì Multi-language Support
                ‚úì Offline Mode
                ‚úì Advanced Analytics
                ‚úì Professional UI/UX
                
                Loyalty Points: ${this.loyaltyPoints}
                Current Tier: ${this.currentTier}
                
                Contact: anyumbasidol@gmail.com
                Phone: 0778796999
                `);

                this.initUniversityDropdown();
                this.initVoiceAssistant();
                this.initCharts();
                this.setupEventListeners();
                this.loadAchievements();
                this.loadWeeklyGoals();
                this.checkPWAInstall();
                
                // Show welcome notification
                setTimeout(() => {
                    this.showNotification('Welcome to NourishAI Pro! Your AI nutritionist is ready.', 'success');
                }, 1000);
                
                // Check for new achievements
                setTimeout(() => {
                    this.checkForNewAchievements();
                }, 2000);
            }

            initUniversityDropdown() {
                const select = document.getElementById('campusSelect');
                if (!select) return;

                // Kenyan Universities Database
                const universities = [
                    { id: 'uon', name: 'University of Nairobi', region: 'nairobi' },
                    { id: 'ku', name: 'Kenyatta University', region: 'nairobi' },
                    { id: 'mu', name: 'Moi University', region: 'riftvalley' },
                    { id: 'jkuat', name: 'JKUAT', region: 'central' },
                    { id: 'egerton', name: 'Egerton University', region: 'riftvalley' },
                    { id: 'maseno', name: 'Maseno University', region: 'nyanza' },
                    { id: 'mmust', name: 'Masinde Muliro University', region: 'western' },
                    { id: 'usiu', name: 'USIU-Africa', region: 'nairobi' },
                    { id: 'strathmore', name: 'Strathmore University', region: 'nairobi' }
                ];

                select.innerHTML = '';
                universities.forEach(uni => {
                    const option = document.createElement('option');
                    option.value = uni.id;
                    option.textContent = uni.name;
                    if (uni.id === 'uon') option.selected = true;
                    select.appendChild(option);
                });

                select.addEventListener('change', (e) => {
                    const selected = universities.find(u => u.id === e.target.value);
                    if (selected) {
                        this.currentUniversity = selected.name;
                        this.currentRegion = selected.region;
                        this.showNotification(`Campus updated to ${selected.name}`, 'info');
                    }
                });
            }

            initVoiceAssistant() {
                const voiceBtn = document.getElementById('voiceAssistantBtn');
                const voiceControl = document.getElementById('voiceControlToggle');
                const voiceInputBtn = document.getElementById('voiceInputBtn');

                if (voiceBtn) {
                    voiceBtn.addEventListener('click', () => this.toggleVoiceAssistant());
                }

                if (voiceControl) {
                    voiceControl.addEventListener('click', () => {
                        this.voiceEnabled = !this.voiceEnabled;
                        voiceControl.innerHTML = this.voiceEnabled 
                            ? '<i class="fas fa-microphone-slash"></i> Mute'
                            : '<i class="fas fa-microphone"></i> Voice';
                        this.showNotification(
                            this.voiceEnabled 
                                ? 'Voice assistant enabled. Say "Hey Nourish" to start.'
                                : 'Voice assistant disabled',
                            this.voiceEnabled ? 'success' : 'warning'
                        );
                    });
                }

                if (voiceInputBtn) {
                    voiceInputBtn.addEventListener('click', () => this.startVoiceInput());
                }

                // Add hotkey for voice assistant
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === ' ') {
                        e.preventDefault();
                        this.toggleVoiceAssistant();
                    }
                });
            }

            initCharts() {
                // Market Trends Chart
                const marketChart = new ApexCharts(document.querySelector("#marketTrendsChart"), {
                    series: [{
                        name: 'Tomatoes',
                        data: [30, 40, 35, 50, 49, 60, 70, 91, 125, 20, 25, 30]
                    }, {
                        name: 'Onions',
                        data: [23, 45, 20, 60, 80, 48, 90, 50, 70, 50, 45, 40]
                    }, {
                        name: 'Rice',
                        data: [150, 140, 145, 160, 155, 170, 180, 175, 160, 165, 170, 165]
                    }],
                    chart: {
                        type: 'line',
                        height: 200,
                        background: 'transparent',
                        foreColor: '#94a3b8',
                        toolbar: {
                            show: false
                        }
                    },
                    colors: ['#10b981', '#6366f1', '#f59e0b'],
                    stroke: {
                        curve: 'smooth',
                        width: 3
                    },
                    xaxis: {
                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                    },
                    tooltip: {
                        theme: 'dark'
                    }
                });
                marketChart.render();
            }

            setupEventListeners() {
                // Budget slider
                const slider = document.getElementById('budgetSlider');
                const display = document.getElementById('budgetDisplay');
                if (slider && display) {
                    slider.addEventListener('input', (e) => {
                        this.budget = parseInt(e.target.value);
                        display.textContent = `Ksh ${this.budget}`;
                        localStorage.setItem('nourish_budget', this.budget);
                    });

                    const saved = localStorage.getItem('nourish_budget');
                    if (saved) {
                        this.budget = parseInt(saved);
                        slider.value = this.budget;
                        display.textContent = `Ksh ${this.budget}`;
                    }
                }

                // Quick actions
                document.querySelectorAll('.quick-action').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = btn.dataset.action;
                        const voiceCommand = btn.dataset.voice;
                        this.handleQuickAction(action, voiceCommand);
                    });
                });

                // Navigation buttons
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const text = btn.textContent.toLowerCase();
                        this.handleNavigation(text);
                    });
                });

                // AI Input
                const sendBtn = document.getElementById('sendMessage');
                const aiInput = document.getElementById('aiInput');
                if (sendBtn && aiInput) {
                    sendBtn.addEventListener('click', () => this.processAIMessage());
                    aiInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') this.processAIMessage();
                    });
                }

                // Loyalty buttons
                document.getElementById('viewLoyalty')?.addEventListener('click', () => this.showLoyaltyProgram());
                document.getElementById('viewAllRewards')?.addEventListener('click', () => this.showAllRewards());
                document.getElementById('viewLoyaltyRewards')?.addEventListener('click', () => this.showLoyaltyRewards());

                // Feature buttons
                document.getElementById('upgradeToPro')?.addEventListener('click', () => this.showUpgradeModal());
                document.getElementById('generateMealPlan')?.addEventListener('click', () => this.generateMealPlan());
                document.getElementById('refreshAI')?.addEventListener('click', () => this.refreshAI());
                document.getElementById('viewAllRecommendations')?.addEventListener('click', () => this.showAllRecommendations());

                // Meal card buttons
                document.querySelectorAll('.start-cooking').forEach(btn => {
                    btn.addEventListener('click', () => this.startCookingMode());
                });
                document.querySelectorAll('.watch-tutorial').forEach(btn => {
                    btn.addEventListener('click', () => this.showTutorial());
                });
                document.querySelectorAll('.buy-ingredients').forEach(btn => {
                    btn.addEventListener('click', () => this.showBuyIngredients());
                });

                // Notification bell
                document.getElementById('notificationBell')?.addEventListener('click', () => this.showNotifications());

                // Language selector
                document.querySelectorAll('[data-lang]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const lang = e.target.dataset.lang;
                        this.changeLanguage(lang);
                    });
                });
            }

            loadAchievements() {
                this.achievements = [
                    { id: 1, name: 'Budget Master', description: 'Save Ksh 1,000 in a week', icon: 'piggy-bank', unlocked: true, progress: 100, points: 100 },
                    { id: 2, name: 'Healthy Streak', description: '7 healthy meals in a row', icon: 'heart', unlocked: true, progress: 70, points: 150 },
                    { id: 3, name: 'Meal Prep Master', description: 'Prep 5 meals in advance', icon: 'box', unlocked: false, progress: 40, points: 200 },
                    { id: 4, name: 'Market Expert', description: 'Use market intel 10 times', icon: 'chart-line', unlocked: false, progress: 20, points: 100 },
                    { id: 5, name: 'Cooking Pro', description: 'Cook 20 different meals', icon: 'chef-hat', unlocked: false, progress: 60, points: 300 },
                    { id: 6, name: 'Challenge Master', description: 'Complete 5 weekly challenges', icon: 'trophy', unlocked: false, progress: 0, points: 500 }
                ];
            }

            loadWeeklyGoals() {
                this.weeklyGoals = {
                    budget: { target: 1750, current: 1250, progress: 71 },
                    healthyMeals: { target: 7, current: 5, progress: 71 },
                    cookingStreak: { target: 7, current: 7, progress: 100 },
                    loyaltyPoints: { target: 500, current: 250, progress: 50 }
                };
            }

            toggleVoiceAssistant() {
                const voiceBtn = document.getElementById('voiceAssistantBtn');
                if (!voiceBtn) return;

                this.voiceEnabled = !this.voiceEnabled;
                voiceBtn.classList.toggle('listening');
                
                if (this.voiceEnabled) {
                    voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                    this.showNotification('Voice assistant listening... Say "Hey Nourish"', 'info');
                    this.speak('Voice assistant activated. How can I help you?');
                    
                    // Simulate voice recognition
                    setTimeout(() => {
                        this.showNotification('Listening for commands...', 'info');
                    }, 1000);
                } else {
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    this.showNotification('Voice assistant deactivated', 'warning');
                }
            }

            startVoiceInput() {
                if (!this.voiceEnabled) {
                    this.showNotification('Please enable voice assistant first', 'warning');
                    return;
                }

                this.showNotification('Listening... Speak now', 'info');
                const aiInput = document.getElementById('aiInput');
                if (aiInput) {
                    aiInput.placeholder = 'Listening... Speak now';
                    aiInput.focus();
                    
                    // Simulate voice input
                    setTimeout(() => {
                        aiInput.value = "What's cheap to buy this week?";
                        aiInput.placeholder = 'Ask NourishAI anything...';
                        this.showNotification('Voice input received', 'success');
                    }, 2000);
                }
            }

            handleQuickAction(action, voiceCommand) {
                switch(action) {
                    case 'generate':
                        this.generateRandomMeal();
                        break;
                    case 'shopping':
                        this.showShoppingList();
                        break;
                    case 'nutrition':
                        this.openNutritionScanner();
                        break;
                    case 'group':
                        this.openGroupCooking();
                        break;
                }

                // Add loyalty points for using quick actions
                this.addLoyaltyPoints(5);
                this.showNotification(`+5 loyalty points for using ${action} action`, 'success');
            }

            generateRandomMeal() {
                const meals = [
                    { name: 'Ugali & Fish Stew', price: 180, time: 30, points: 25 },
                    { name: 'Chapati & Bean Curry', price: 120, time: 25, points: 20 },
                    { name: 'Rice & Chicken Stew', price: 200, time: 35, points: 30 },
                    { name: 'Pasta Bolognese', price: 150, time: 20, points: 15 }
                ];
                
                const meal = meals[Math.floor(Math.random() * meals.length)];
                
                this.showModal('Generated Meal', `
                    <div class="text-center">
                        <div class="text-5xl mb-4">üçΩÔ∏è</div>
                        <h3 class="text-2xl font-bold mb-2">${meal.name}</h3>
                        <div class="grid grid-cols-3 gap-4 my-6">
                            <div class="p-3 rounded-xl bg-emerald-900/30">
                                <p class="text-sm text-gray-400">Price</p>
                                <p class="text-xl font-bold text-emerald-400">Ksh ${meal.price}</p>
                            </div>
                            <div class="p-3 rounded-xl bg-blue-900/30">
                                <p class="text-sm text-gray-400">Time</p>
                                <p class="text-xl font-bold text-blue-400">${meal.time} mins</p>
                            </div>
                            <div class="p-3 rounded-xl bg-purple-900/30">
                                <p class="text-sm text-gray-400">Points</p>
                                <p class="text-xl font-bold text-purple-400">+${meal.points}</p>
                            </div>
                        </div>
                        <p class="text-gray-400 mb-6">Perfect for your budget of Ksh ${this.budget}! This will use ${Math.round(meal.price/this.budget*100)}% of your daily budget.</p>
                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.startCookingMode()">
                                <i class="fas fa-play"></i> Start Cooking
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Maybe Later
                            </button>
                        </div>
                    </div>
                `);
            }

            showShoppingList() {
                this.showModal('Smart Shopping List', `
                    <div class="space-y-4">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-emerald-900/30 to-transparent">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-bold">This Week's List</h4>
                                <span class="text-sm text-emerald-400">Save 35%</span>
                            </div>
                            <p class="text-sm text-gray-400">Optimized for your budget and local markets</p>
                        </div>

                        <div class="space-y-3">
                            ${this.generateShoppingItems().map(item => `
                                <div class="shopping-item">
                                    <input type="checkbox" class="mr-3" ${item.completed ? 'checked' : ''}>
                                    <div class="flex-1">
                                        <p class="font-medium">${item.name}</p>
                                        <p class="text-xs text-gray-400">${item.market} ‚Ä¢ ${item.price}</p>
                                    </div>
                                    <span class="text-sm ${item.savings > 0 ? 'text-emerald-400' : 'text-gray-400'}">
                                        ${item.savings > 0 ? `Save ${item.savings}%` : ''}
                                    </span>
                                </div>
                            `).join('')}
                        </div>

                        <div class="p-4 rounded-xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold">Total Estimated Cost</p>
                                    <p class="text-sm text-gray-400">For 7 days of meals</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold gradient-text">Ksh 1,750</p>
                                    <p class="text-sm text-emerald-400">Save Ksh 420</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.printShoppingList()">
                                <i class="fas fa-print"></i> Print List
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Close
                            </button>
                        </div>
                    </div>
                `);
            }

            generateShoppingItems() {
                return [
                    { name: 'Tomatoes', market: 'Toi Market', price: 'Ksh 40 (2kg)', savings: 40, completed: true },
                    { name: 'Onions', market: 'Gikomba', price: 'Ksh 50 (1kg)', savings: 25, completed: true },
                    { name: 'Rice', market: 'Nakumatt', price: 'Ksh 350 (5kg)', savings: 10, completed: false },
                    { name: 'Cooking Oil', market: 'Tuskys', price: 'Ksh 450 (2L)', savings: 5, completed: false },
                    { name: 'Chicken', market: 'City Market', price: 'Ksh 450 (1kg)', savings: 0, completed: false },
                    { name: 'Eggs', market: 'Local Kiosk', price: 'Ksh 300 (tray)', savings: 10, completed: false }
                ];
            }

            openNutritionScanner() {
                this.showModal('Nutrition Scanner', `
                    <div class="text-center">
                        <div class="scanner-frame mx-auto mb-6">
                            <div class="scanner-line"></div>
                        </div>
                        <p class="text-gray-400 mb-6">Point your camera at a food label or ingredient list</p>
                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.startScanning()">
                                <i class="fas fa-camera"></i> Start Scanning
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Cancel
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-6">
                            <i class="fas fa-info-circle mr-1"></i>
                            Scans over 10,000 food products. Earn +10 points per scan.
                        </p>
                    </div>
                `);
            }

            openGroupCooking() {
                this.showModal('Group Cooking', `
                    <div class="space-y-6">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-pink-900/30 to-rose-900/30">
                            <h4 class="font-bold mb-2">Cook Together, Save Together</h4>
                            <p class="text-sm text-gray-400">Split costs and cooking time with roommates</p>
                        </div>

                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="p-4 rounded-xl bg-gray-900/50">
                                <div class="text-2xl mb-2">üí∞</div>
                                <p class="font-bold">Save 40%</p>
                                <p class="text-xs text-gray-400">Per person</p>
                            </div>
                            <div class="p-4 rounded-xl bg-gray-900/50">
                                <div class="text-2xl mb-2">‚è±Ô∏è</div>
                                <p class="font-bold">Save 60%</p>
                                <p class="text-xs text-gray-400">Cooking time</p>
                            </div>
                            <div class="p-4 rounded-xl bg-gray-900/50">
                                <div class="text-2xl mb-2">üéÅ</div>
                                <p class="font-bold">+100 pts</p>
                                <p class="text-xs text-gray-400">Group bonus</p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-3">Create New Group</label>
                            <input type="text" placeholder="Group name (e.g., Room 12 Cooking Club)" class="premium-input mb-4">
                            <input type="number" placeholder="Number of members" class="premium-input mb-4">
                            <textarea placeholder="Group description..." class="premium-input mb-4" rows="3"></textarea>
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.createGroup()">
                                <i class="fas fa-users"></i> Create Group
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Cancel
                            </button>
                        </div>
                    </div>
                `);
            }

            openCookingTimer() {
                this.showModal('Smart Cooking Timer', `
                    <div class="text-center">
                        <div class="timer-display mb-6" id="timerDisplay">25:00</div>
                        
                        <div class="grid grid-cols-3 gap-4 mb-6">
                            <button class="p-4 rounded-xl bg-gray-900/50 hover:bg-gray-800/50" onclick="window.nourishAI.setTimer(5)">
                                <p class="text-lg font-bold">5 min</p>
                                <p class="text-xs text-gray-400">Quick tasks</p>
                            </button>
                            <button class="p-4 rounded-xl bg-gray-900/50 hover:bg-gray-800/50" onclick="window.nourishAI.setTimer(15)">
                                <p class="text-lg font-bold">15 min</p>
                                <p class="text-xs text-gray-400">Rice/pasta</p>
                            </button>
                            <button class="p-4 rounded-xl bg-gray-900/50 hover:bg-gray-800/50" onclick="window.nourishAI.setTimer(30)">
                                <p class="text-lg font-bold">30 min</p>
                                <p class="text-xs text-gray-400">Full meals</p>
                            </button>
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" id="startTimerBtn" onclick="window.nourishAI.startTimer()">
                                <i class="fas fa-play"></i> Start Timer
                            </button>
                            <button class="btn-premium flex-1 bg-gradient-to-r from-amber-600 to-orange-600" id="pauseTimerBtn" onclick="window.nourishAI.pauseTimer()" style="display: none;">
                                <i class="fas fa-pause"></i> Pause
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Close
                            </button>
                        </div>

                        <p class="text-xs text-gray-500 mt-6">
                            <i class="fas fa-bell mr-1"></i>
                            Timer will notify you when food is ready. Multiple timers supported.
                        </p>
                    </div>
                `);
            }

            openMealPlanner() {
                this.showModal('Weekly Meal Planner', `
                    <div class="space-y-6">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30">
                            <h4 class="font-bold mb-2">Plan Your Week</h4>
                            <p class="text-sm text-gray-400">Drag and drop meals to plan your week</p>
                        </div>

                        <div class="grid grid-cols-7 gap-2 text-center">
                            ${['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map(day => `
                                <div class="calendar-day ${Math.random() > 0.5 ? 'meal-planned' : ''}">
                                    ${day.charAt(0)}
                                </div>
                            `).join('')}
                        </div>

                        <div class="space-y-3">
                            <h5 class="font-medium">Available Meals</h5>
                            ${['Smart Rice Bowl', 'Githeri Power', 'Chicken Feast', 'Vegan Delight', 'Pasta Special'].map(meal => `
                                <div class="p-3 rounded-xl bg-gray-900/50 flex items-center justify-between">
                                    <span>${meal}</span>
                                    <button class="text-sm text-indigo-400 hover:text-indigo-300">
                                        <i class="fas fa-plus"></i> Add to day
                                    </button>
                                </div>
                            `).join('')}
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.saveMealPlan()">
                                <i class="fas fa-save"></i> Save Plan
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Cancel
                            </button>
                        </div>
                    </div>
                `);
            }

            processAIMessage() {
                const input = document.getElementById('aiInput');
                const message = input.value.trim();
                
                if (!message) return;

                // Add user message to chat
                this.addChatMessage(message, 'user');
                input.value = '';

                // AI thinking animation
                setTimeout(() => {
                    const response = this.generateAIResponse(message);
                    this.addChatMessage(response, 'ai');
                    this.addLoyaltyPoints(2); // Points for using AI chat
                }, 1000);
            }

            addChatMessage(text, sender) {
                const container = document.getElementById('aiChatContainer');
                if (!container) return;

                const messageDiv = document.createElement('div');
                messageDiv.className = `ai-bubble glass ${sender === 'user' ? 'bg-gray-900/50' : ''}`;
                messageDiv.innerHTML = `
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 rounded-full ${sender === 'user' ? 'bg-gradient-to-br from-gray-700 to-gray-900' : 'bg-gradient-to-br from-indigo-500 to-purple-600'} flex items-center justify-center flex-shrink: 0">
                            <i class="fas ${sender === 'user' ? 'fa-user' : 'fa-robot'} text-white"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-3">
                                <span class="font-semibold">${sender === 'user' ? 'You' : 'NourishAI Pro'}</span>
                                <span class="text-xs text-gray-500">Just now</span>
                            </div>
                            <p class="text-gray-300 leading-relaxed">${text.replace(/\n/g, '<br>')}</p>
                        </div>
                    </div>
                `;
                
                container.insertBefore(messageDiv, container.children[container.children.length - 3]);
                container.scrollTop = container.scrollHeight;
            }

            generateAIResponse(message) {
                const responses = {
                    budget: `For your budget of Ksh ${this.budget}, I recommend focusing on tomatoes, onions, and rice this week. You can make 3 meals for Ksh ${this.budget * 3} total.`,
                    recipe: "Try this quick recipe: Cook rice with diced tomatoes, onions, and an egg. One pot, 20 minutes, Ksh 120 total. Add some sukuma wiki for extra nutrition!",
                    market: "Toi Market has tomatoes at Ksh 20/kg (40% off). Gikomba has onions at Ksh 50/kg. Best time to buy is Tuesday morning.",
                    loyalty: `You have ${this.loyaltyPoints} points (Gold Tier). Cook 3 more meals to reach Platinum and unlock free Pro features!`,
                    default: `I understand you're asking about "${message}". As your AI nutritionist at ${this.currentUniversity}, I can help with meal planning, market prices, recipes, and tracking your loyalty rewards. What would you like to know?`
                };

                const lowerMsg = message.toLowerCase();
                if (lowerMsg.includes('budget') || lowerMsg.includes('cheap') || lowerMsg.includes('money')) {
                    return responses.budget;
                } else if (lowerMsg.includes('recipe') || lowerMsg.includes('cook') || lowerMsg.includes('make')) {
                    return responses.recipe;
                } else if (lowerMsg.includes('market') || lowerMsg.includes('price') || lowerMsg.includes('buy')) {
                    return responses.market;
                } else if (lowerMsg.includes('loyalty') || lowerMsg.includes('points') || lowerMsg.includes('reward')) {
                    return responses.loyalty;
                } else {
                    return responses.default;
                }
            }

            showLoyaltyProgram() {
                this.showModal('Loyalty Program', `
                    <div class="space-y-6">
                        <div class="text-center">
                            <div class="text-5xl font-bold gradient-text-loyalty mb-2">${this.loyaltyPoints}</div>
                            <p class="text-gray-400">Loyalty Points</p>
                            <div class="inline-block px-4 py-2 rounded-full ${this.getTierClass()} mt-2">
                                ${this.currentTier.toUpperCase()} TIER
                            </div>
                        </div>

                        <div class="grid grid-cols-5 gap-2">
                            ${['Bronze', 'Silver', 'Gold', 'Platinum', 'Diamond'].map((tier, index) => `
                                <div class="text-center p-3 rounded-xl ${this.getTierProgressClass(tier, index)}">
                                    <div class="text-2xl mb-1">${['ü•â', 'ü•à', 'ü•á', 'üíé', 'üëë'][index]}</div>
                                    <p class="text-xs font-bold">${tier}</p>
                                    <p class="text-xs text-gray-400">${index * 500}+</p>
                                </div>
                            `).join('')}
                        </div>

                        <div class="space-y-4">
                            <h4 class="font-bold">Ways to Earn Points</h4>
                            ${[
                                { action: 'Cook a meal', points: '+25', icon: 'utensils' },
                                { action: 'Save Ksh 100', points: '+10', icon: 'piggy-bank' },
                                { action: '7-day streak', points: '+50', icon: 'fire' },
                                { action: 'Scan nutrition', points: '+10', icon: 'camera' },
                                { action: 'Invite friend', points: '+100', icon: 'user-plus' }
                            ].map(item => `
                                <div class="flex items-center justify-between p-3 rounded-xl bg-gray-900/50">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-${item.icon} text-indigo-400"></i>
                                        <span>${item.action}</span>
                                    </div>
                                    <span class="font-bold text-emerald-400">${item.points}</span>
                                </div>
                            `).join('')}
                        </div>

                        <button class="w-full btn-premium bg-gradient-to-r from-purple-600 to-pink-600" onclick="window.nourishAI.showAllRewards()">
                            <i class="fas fa-gift"></i> View Available Rewards
                        </button>
                    </div>
                `);
            }

            showAllRewards() {
                this.showModal('Available Rewards', `
                    <div class="space-y-4">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-purple-900/30 to-pink-900/30">
                            <h4 class="font-bold mb-2">Redeem Your Points</h4>
                            <p class="text-sm text-gray-400">You have ${this.loyaltyPoints} points available</p>
                        </div>

                        ${[
                            { name: 'Free Meal', description: 'Any meal up to Ksh 200', points: 500, available: this.loyaltyPoints >= 500, tier: 'Bronze+' },
                            { name: 'Pro Features', description: '1 month free access', points: 750, available: this.loyaltyPoints >= 750, tier: 'Silver+' },
                            { name: 'Smart Kitchen Kit', description: 'Cooking utensils set', points: 1500, available: this.loyaltyPoints >= 1500 && this.currentTier === 'gold', tier: 'Gold+' },
                            { name: 'Personal Nutritionist', description: '1-hour consultation', points: 2500, available: this.loyaltyPoints >= 2500 && this.currentTier === 'platinum', tier: 'Platinum+' },
                            { name: 'Annual Pro Subscription', description: 'Full year of Pro features', points: 5000, available: this.loyaltyPoints >= 5000 && this.currentTier === 'diamond', tier: 'Diamond' }
                        ].map(reward => `
                            <div class="p-4 rounded-xl border ${reward.available ? 'border-emerald-500/30 bg-emerald-900/10' : 'border-gray-700 bg-gray-900/50'}">
                                <div class="flex items-start justify-between mb-3">
                                    <div>
                                        <h5 class="font-bold">${reward.name}</h5>
                                        <p class="text-sm text-gray-400">${reward.description}</p>
                                        <span class="text-xs px-2 py-1 rounded-full bg-gray-800 mt-1">${reward.tier}</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-xl font-bold ${reward.available ? 'text-emerald-400' : 'text-gray-500'}">${reward.points} pts</div>
                                        ${!reward.available && this.loyaltyPoints < reward.points ? 
                                            `<div class="text-xs text-gray-500">Need ${reward.points - this.loyaltyPoints} more</div>` : ''}
                                    </div>
                                </div>
                                <button class="w-full ${reward.available ? 'btn-premium' : 'premium-input border border-gray-700'} ${!reward.available ? 'opacity-50 cursor-not-allowed' : ''}"
                                        ${!reward.available ? 'disabled' : ''}
                                        onclick="${reward.available ? `window.nourishAI.redeemReward('${reward.name}', ${reward.points})` : ''}">
                                    ${reward.available ? 'Redeem Now' : 'Not Available'}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `);
            }

            showLoyaltyRewards() {
                this.showAllRewards();
            }

            redeemReward(rewardName, points) {
                if (this.loyaltyPoints >= points) {
                    this.loyaltyPoints -= points;
                    this.showNotification(`Successfully redeemed ${rewardName} for ${points} points!`, 'success');
                    this.celebrateAchievement();
                    closeModal();
                    
                    // Update loyalty points display
                    const loyaltyDisplay = document.querySelector('.loyalty-card .text-5xl');
                    if (loyaltyDisplay) {
                        loyaltyDisplay.textContent = this.loyaltyPoints;
                    }
                } else {
                    this.showNotification(`You need ${points - this.loyaltyPoints} more points to redeem this reward`, 'warning');
                }
            }

            addLoyaltyPoints(points) {
                this.loyaltyPoints += points;
                this.showNotification(`+${points} loyalty points! Total: ${this.loyaltyPoints}`, 'success');
                
                // Check for tier upgrades
                this.checkTierUpgrade();
                
                // Update display
                const loyaltyDisplay = document.querySelector('.loyalty-card .text-5xl');
                if (loyaltyDisplay) {
                    loyaltyDisplay.textContent = this.loyaltyPoints;
                }
            }

            checkTierUpgrade() {
                const oldTier = this.currentTier;
                
                if (this.loyaltyPoints >= 2500) {
                    this.currentTier = 'diamond';
                } else if (this.loyaltyPoints >= 1500) {
                    this.currentTier = 'platinum';
                } else if (this.loyaltyPoints >= 1000) {
                    this.currentTier = 'gold';
                } else if (this.loyaltyPoints >= 500) {
                    this.currentTier = 'silver';
                } else {
                    this.currentTier = 'bronze';
                }
                
                if (oldTier !== this.currentTier) {
                    this.showNotification(`üéâ Congratulations! You've been upgraded to ${this.currentTier.toUpperCase()} Tier!`, 'success');
                    this.celebrateAchievement();
                    this.addLoyaltyPoints(100); // Bonus points for tier upgrade
                }
            }

            getTierClass() {
                const classes = {
                    bronze: 'tier-bronze',
                    silver: 'tier-silver',
                    gold: 'tier-gold',
                    platinum: 'tier-platinum',
                    diamond: 'tier-diamond'
                };
                return classes[this.currentTier] || 'tier-bronze';
            }

            getTierProgressClass(tier, index) {
                const tierOrder = ['bronze', 'silver', 'gold', 'platinum', 'diamond'];
                const currentIndex = tierOrder.indexOf(this.currentTier);
                
                if (index < currentIndex) {
                    return 'bg-gradient-to-b from-gray-800 to-gray-700 opacity-50';
                } else if (index === currentIndex) {
                    return 'bg-gradient-to-b from-yellow-900 to-amber-800 border-2 border-amber-500';
                } else {
                    return 'bg-gradient-to-b from-gray-900 to-gray-800';
                }
            }

            generateMealPlan() {
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                const meals = ['Smart Rice Bowl', 'Githeri Power', 'Chicken Feast', 'Pasta Special', 'Vegan Delight', 'Ugali Special', 'Leftovers Day'];
                const costs = [120, 80, 180, 150, 140, 110, 50];
                
                let planHTML = `
                    <div class="space-y-6">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30">
                            <h4 class="font-bold mb-2">Weekly Meal Plan Generated</h4>
                            <p class="text-sm text-gray-400">Based on your budget of Ksh ${this.budget}/day</p>
                        </div>

                        <div class="space-y-3">
                            ${days.map((day, index) => `
                                <div class="flex items-center justify-between p-3 rounded-xl bg-gray-900/50">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                                            <span class="font-bold">${day.charAt(0)}</span>
                                        </div>
                                        <div>
                                            <p class="font-medium">${day}</p>
                                            <p class="text-sm text-gray-400">${meals[index]}</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">Ksh ${costs[index]}</p>
                                        <p class="text-xs text-gray-400">${Math.round(costs[index]/this.budget*100)}% of budget</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <div class="p-4 rounded-xl bg-gradient-to-r from-emerald-900/30 to-green-900/30">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold">Weekly Total</p>
                                    <p class="text-sm text-gray-400">7 days of meals</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-emerald-400">Ksh ${costs.reduce((a, b) => a + b, 0)}</p>
                                    <p class="text-sm text-emerald-400">Save Ksh ${this.budget * 7 - costs.reduce((a, b) => a + b, 0)}</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1" onclick="window.nourishAI.saveMealPlan()">
                                <i class="fas fa-save"></i> Save Plan
                            </button>
                            <button class="btn-premium flex-1 bg-gradient-to-r from-purple-600 to-pink-600" onclick="window.nourishAI.generateShoppingListFromPlan()">
                                <i class="fas fa-shopping-cart"></i> Generate Shopping List
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Close
                            </button>
                        </div>
                    </div>
                `;

                this.showModal('AI-Generated Meal Plan', planHTML);
                this.addLoyaltyPoints(25); // Points for generating meal plan
            }

            refreshAI() {
                this.showNotification('Refreshing AI recommendations with latest market data...', 'info');
                setTimeout(() => {
                    this.showNotification('AI recommendations updated!', 'success');
                    this.addLoyaltyPoints(5);
                }, 1500);
            }

            showAllRecommendations() {
                this.showModal('All Recommendations', `
                    <div class="space-y-4">
                        <div class="p-4 rounded-xl bg-gradient-to-r from-indigo-900/30 to-purple-900/30">
                            <h4 class="font-bold mb-2">Personalized Just For You</h4>
                            <p class="text-sm text-gray-400">Based on your preferences and history</p>
                        </div>

                        ${[
                            { category: 'Budget', icon: 'piggy-bank', color: 'emerald', items: ['Githeri Power Bowl (Ksh 80)', 'Rice & Beans (Ksh 100)', 'Vegetable Soup (Ksh 70)'] },
                            { category: 'Healthy', icon: 'heart', color: 'red', items: ['Salmon Salad (Ksh 200)', 'Quinoa Bowl (Ksh 180)', 'Smoothie Pack (Ksh 150)'] },
                            { category: 'Quick', icon: 'bolt', color: 'amber', items: ['15-min Pasta (Ksh 120)', 'Instant Ramen Upgrade (Ksh 100)', 'Sandwich Combo (Ksh 90)'] },
                            { category: 'Premium', icon: 'crown', color: 'purple', items: ['Steak Dinner (Ksh 350)', 'Seafood Platter (Ksh 400)', 'Sushi Night (Ksh 450)'] }
                        ].map(cat => `
                            <div class="p-4 rounded-xl border border-${cat.color}-500/20 bg-${cat.color}-900/10">
                                <div class="flex items-center gap-3 mb-3">
                                    <i class="fas fa-${cat.icon} text-${cat.color}-400 text-xl"></i>
                                    <h5 class="font-bold">${cat.category} Picks</h5>
                                </div>
                                <div class="space-y-2">
                                    ${cat.items.map(item => `
                                        <div class="flex items-center justify-between p-2 rounded-lg bg-gray-900/50">
                                            <span>${item}</span>
                                            <button class="text-sm text-${cat.color}-400 hover:text-${cat.color}-300">
                                                <i class="fas fa-plus"></i> Add
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}

                        <button class="w-full btn-premium" onclick="closeModal()">
                            <i class="fas fa-check"></i> Got it, thanks!
                        </button>
                    </div>
                `);
            }

            showUpgradeModal() {
                this.showModal('Upgrade to NourishAI Pro', `
                    <div class="space-y-6">
                        <div class="text-center">
                            <div class="text-5xl mb-4">üöÄ</div>
                            <h3 class="text-2xl font-bold mb-2">Unlock Pro Features</h3>
                            <p class="text-gray-400">Get the complete campus nutrition experience</p>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 rounded-xl bg-gradient-to-br from-indigo-900/30 to-purple-900/30">
                                <i class="fas fa-brain text-2xl text-indigo-400 mb-3"></i>
                                <p class="font-bold">Advanced AI</p>
                                <p class="text-xs text-gray-400">Personalized recommendations</p>
                            </div>
                            <div class="p-4 rounded-xl bg-gradient-to-br from-emerald-900/30 to-cyan-900/30">
                                <i class="fas fa-camera text-2xl text-emerald-400 mb-3"></i>
                                <p class="font-bold">Nutrition Scanner</p>
                                <p class="text-xs text-gray-400">Scan food labels</p>
                            </div>
                            <div class="p-4 rounded-xl bg-gradient-to-br from-amber-900/30 to-orange-900/30">
                                <i class="fas fa-robot text-2xl text-amber-400 mb-3"></i>
                                <p class="font-bold">Voice Assistant</p>
                                <p class="text-xs text-gray-400">Hands-free control</p>
                            </div>
                            <div class="p-4 rounded-xl bg-gradient-to-br from-pink-900/30 to-rose-900/30">
                                <i class="fas fa-chart-line text-2xl text-pink-400 mb-3"></i>
                                <p class="font-bold">Advanced Analytics</p>
                                <p class="text-xs text-gray-400">Detailed insights</p>
                            </div>
                        </div>

                        <div class="p-4 rounded-xl bg-gradient-to-r from-yellow-900/30 to-amber-900/30">
                            <div class="text-center">
                                <p class="text-3xl font-bold gradient-text-premium mb-2">Ksh 199/month</p>
                                <p class="text-sm text-gray-400">or Ksh 1,990/year (save 16%)</p>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button class="btn-premium flex-1 bg-gradient-to-r from-amber-600 to-orange-600" onclick="window.nourishAI.purchasePro()">
                                <i class="fas fa-bolt"></i> Upgrade Now
                            </button>
                            <button class="premium-input border border-gray-700 flex-1" onclick="closeModal()">
                                Maybe Later
                            </button>
                        </div>

                        <p class="text-xs text-center text-gray-500">
                            <i class="fas fa-shield-alt mr-1"></i>
                            Secure payment ‚Ä¢ Cancel anytime ‚Ä¢ 7-day free trial
                        </p>
                    </div>
                `);
            }

            purchasePro() {
                this.showNotification('Processing upgrade to Pro...', 'info');
                setTimeout(() => {
                    this.showNotification('üéâ Welcome to NourishAI Pro! All features unlocked.', 'success');
                    this.celebrateAchievement();
                    closeModal();
                }, 2000);
            }

            startCookingMode() {
                this.showNotification('Starting cooking mode... Step-by-step instructions loading.', 'info');
                this.addLoyaltyPoints(25);
            }

            showTutorial() {
                this.showNotification('Loading cooking tutorial video...', 'info');
            }

            showBuyIngredients() {
                this.showNotification('Showing cheapest markets for ingredients...', 'info');
            }

            showNotifications() {
                this.showModal('Notifications', `
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 rounded-xl bg-emerald-900/20 border border-emerald-500/20">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-gem text-emerald-400"></i>
                                <div>
                                    <p class="font-medium">Loyalty Points Updated</p>
                                    <p class="text-sm text-gray-400">+25 points for cooking</p>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">2 min ago</span>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-xl bg-blue-900/20 border border-blue-500/20">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-bell text-blue-400"></i>
                                <div>
                                    <p class="font-medium">Price Alert</p>
                                    <p class="text-sm text-gray-400">Tomatoes 40% cheaper</p>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">1 hour ago</span>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-xl bg-purple-900/20 border border-purple-500/20">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-trophy text-purple-400"></i>
                                <div>
                                    <p class="font-medium">Achievement Unlocked</p>
                                    <p class="text-sm text-gray-400">Budget Master</p>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">1 day ago</span>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-xl bg-amber-900/20 border border-amber-500/20">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-fire text-amber-400"></i>
                                <div>
                                    <p class="font-medium">Streak Reminder</p>
                                    <p class="text-sm text-gray-400">Maintain 7-day streak</p>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">2 days ago</span>
                        </div>

                        <button class="w-full premium-input border border-gray-700" onclick="window.nourishAI.markAllAsRead()">
                            <i class="fas fa-check mr-2"></i> Mark all as read
                        </button>
                    </div>
                `);
            }

            checkForNewAchievements() {
                // Simulate checking for new achievements
                const newAchievements = Math.random() > 0.7;
                if (newAchievements) {
                    this.showNotification('üéâ New achievement available! Check your profile.', 'success');
                }
            }

            checkPWAInstall() {
                // Check if PWA can be installed
                if ('serviceWorker' in navigator && 'PushManager' in window) {
                    setTimeout(() => {
                        this.showNotification('üì± Install NourishAI as an app for better experience', 'info');
                    }, 5000);
                }
            }

            celebrateAchievement() {
                // Create confetti effect
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-10px';
                    confetti.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                    
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => confetti.remove(), 5000);
                }
                
                // Add fall animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fall {
                        to {
                            transform: translateY(100vh) rotate(360deg);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }

            showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 z-50 p-4 rounded-2xl glass border ${type === 'success' ? 'border-emerald-500/20 bg-emerald-900/20' : type === 'warning' ? 'border-amber-500/20 bg-amber-900/20' : type === 'error' ? 'border-red-500/20 bg-red-900/20' : 'border-blue-500/20 bg-blue-900/20'} animate__animated animate__fadeInRight`;
                notification.innerHTML = `
                    <div class="flex items-center gap-3">
                        <i class="fas ${type === 'success' ? 'fa-check-circle text-emerald-400' : type === 'warning' ? 'fa-exclamation-triangle text-amber-400' : type === 'error' ? 'fa-times-circle text-red-400' : 'fa-info-circle text-blue-400'}"></i>
                        <div>
                            <p class="font-medium">${message}</p>
                            <p class="text-xs text-gray-400">Just now</p>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Remove notification after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('animate__fadeInRight');
                    notification.classList.add('animate__fadeOutRight');
                    setTimeout(() => notification.remove(), 300);
                }, 5000);
            }

            showModal(title, content) {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="flex items-center justify-between mb-8">
                            <h3 class="text-2xl font-bold">${title}</h3>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                        ${content}
                    </div>
                `;
                
                document.body.appendChild(modal);
            }

            changeLanguage(lang) {
                this.showNotification(`Language changed to ${lang === 'en' ? 'English' : lang === 'sw' ? 'Kiswahili' : 'French'}`, 'success');
                // In a real app, you would update all text content here
            }

            handleNavigation(text) {
                if (text.includes('dashboard')) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else if (text.includes('ai chef')) {
                    document.getElementById('startAI')?.click();
                } else if (text.includes('market intel')) {
                    document.getElementById('marketIntelBtn')?.click();
                } else if (text.includes('nutrition')) {
                    this.openNutritionScanner();
                } else if (text.includes('loyalty')) {
                    this.showLoyaltyProgram();
                } else if (text.includes('admin')) {
                    window.location.href = 'admin.html';
                }
            }
        }

        // Global functions
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) modal.remove();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.nourishAI = new NourishAIPro();
            
            // Add service worker for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            }
        });
    </script>
</body>
</html>
[file content end]




